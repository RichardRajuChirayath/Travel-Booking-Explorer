@if (currentPackage(); as pkg) {
<div class="package-view anime-fade-in">
    <!-- Hero Image Section -->
    <div class="hero-image-container">
        <img [src]="currentDestination()?.imageUrl" [alt]="currentDestination()?.name" class="hero-img">
        <div class="hero-overlay">
            <button mat-icon-button (click)="goBack()" class="back-btn-overlay">
                <mat-icon>arrow_back</mat-icon>
            </button>
            <div class="header-content">
                <div class="chip-container">
                    <span class="destination-chip">{{ currentDestination()?.name }}, {{ currentDestination()?.country
                        }}</span>
                </div>
                <h1>{{ pkg.name }}</h1>
                <div class="rating-info" *ngIf="currentDestination()?.rating">
                    <mat-icon>star</mat-icon>
                    <span>{{ currentDestination()?.rating }} Â· Premium Experience</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container content-grid">
        <!-- Main Details -->
        <div class="main-column">
            <div class="about-section">
                <h2>About {{ currentDestination()?.name }}</h2>
                <p>{{ currentDestination()?.description }}</p>
            </div>

            <nav mat-tab-nav-bar [tabPanel]="tabPanel">
                <a mat-tab-link routerLink="overview" routerLinkActive #rla1="routerLinkActive"
                    [active]="rla1.isActive">
                    Overview </a>
                <a mat-tab-link routerLink="itinerary" routerLinkActive #rla2="routerLinkActive"
                    [active]="rla2.isActive">
                    Itinerary </a>
                <a mat-tab-link routerLink="reviews" routerLinkActive #rla3="routerLinkActive" [active]="rla3.isActive">
                    Reviews </a>
            </nav>

            <mat-tab-nav-panel #tabPanel>
                <div class="tab-content">
                    <router-outlet></router-outlet>
                </div>
            </mat-tab-nav-panel>
        </div>

        <!-- Sticky Sidebar -->
        <div class="sidebar">
            <div class="booking-card">
                <div class="price-header">
                    <span class="price-val">{{ pkg.price | currency:'INR':'symbol':'1.0-0' }}</span>
                    <span class="price-label">per person</span>
                </div>

                <div class="booking-stats">
                    <div class="stat">
                        <mat-icon>schedule</mat-icon>
                        <span>{{ pkg.durationDays }} Days</span>
                    </div>
                    <div class="stat">
                        <mat-icon>trending_up</mat-icon>
                        <span>{{ pkg.tier }} Class</span>
                    </div>
                    <div class="stat">
                        <mat-icon>group</mat-icon>
                        <span>{{ pkg.availableSlots }} slots left</span>
                    </div>
                </div>

                <div class="urgency-note" *ngIf="pkg.availableSlots < 5">
                    <mat-icon>local_fire_department</mat-icon>
                    <span>Selling fast! Only {{ pkg.availableSlots }} spots remaining.</span>
                </div>

                <button mat-raised-button color="accent" class="book-btn-large" [routerLink]="['/book', pkg.id]">
                    Book this Package
                </button>

                <p class="terms">Free cancellation until 48 hours before departure.</p>
            </div>
        </div>
    </div>
</div>
} @else {
<div class="loading-container flex-center">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading your adventure details...</p>
</div>
}